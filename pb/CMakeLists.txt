FILE(GLOB_RECURSE PROTO_SRCS *.proto)
EXECUTE_PROCESS(COMMAND rm -rf ${CMAKE_SOURCE_DIR}/javaservice/sdkpay/src/protocol/*)
SET(IMPORTPATH ${CMAKE_SOURCE_DIR}/pb/)
FOREACH(PROTO_FILE ${PROTO_SRCS})
  GET_FILENAME_COMPONENT(PROTO_FILENAME ${PROTO_FILE} NAME_WE)
  #message(${EXECUTABLE_OUTPUT_PATH}${PROTO_FILENAME}.pb)
  #MESSAGE(${PROTO_FILENAME})
  IF(OS_LINUX)
    EXECUTE_PROCESS(COMMAND protoc -o${EXECUTABLE_OUTPUT_PATH}${PROTO_FILENAME}.pb -I=${IMPORTPATH} ${PROTO_FILE})
  ENDIF()
  IF(OS_APPLE)
    EXECUTE_PROCESS(COMMAND protoc -o${EXECUTABLE_OUTPUT_PATH}Debug/${PROTO_FILENAME}.pb -I=${IMPORTPATH} ${PROTO_FILE})
  ENDIF()
  # java
  #EXECUTE_PROCESS(COMMAND protoc --java_out=${EXECUTABLE_OUTPUT_PATH}javapb/ -I=/ ${PROTO_FILE})
  #EXECUTE_PROCESS(COMMAND protoc --java_out=${CMAKE_SOURCE_DIR}/javaservice/sdkpay/src/ -I=${IMPORTPATH} ${PROTO_FILE})
  EXECUTE_PROCESS(COMMAND protoc --java_out=${CMAKE_SOURCE_DIR}/pb/javasrc/ -I=${IMPORTPATH} ${PROTO_FILE})
  # cpp
  #EXECUTE_PROCESS(COMMAND protoc --cpp_out=${EXECUTABLE_OUTPUT_PATH}cpp -I=${IMPORTPATH} ${PROTO_FILE})
  EXECUTE_PROCESS(COMMAND protoc --cpp_out=${CMAKE_SOURCE_DIR}/pb/cppsrc/ -I=${IMPORTPATH} ${PROTO_FILE})
  #EXECUTE_PROCESS(COMMAND protoc --cpp_out=${CMAKE_SOURCE_DIR}/service/protocol/ -I=${IMPORTPATH} ${PROTO_FILE})
  # python
  EXECUTE_PROCESS(COMMAND protoc --python_out=${CMAKE_SOURCE_DIR}/pb/pythonsrc/ -I=${IMPORTPATH} ${PROTO_FILE})
ENDFOREACH()
